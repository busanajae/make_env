# Trac install
sudo -H apt-get install subversion libapache2-mod-python pypy python-babel trac python-pip -y
sudo -H pip install --upgrade pip
sudo -H pip install --upgrade Babel
sudo -H pip install --upgrade Trac
sudo -H pip install --upgrade pillow
sudo -H pip install dnspython
sudo -H pip install spambayes
sudo -H pip install oauth2
sudo -H pip install httplib2
sudo -H pip install TracTags
sudo -H pip install TracSpamFilter 
sudo -H pip install TracVote
sudo -H easy_install --always-unzip https://trac-hacks.org/svn/fullblogplugin/0.11
sudo -H mkdir -p /var/www/trac/
sudo -H mkdir -p /var/www/trac/git
sudo -H trac-admin /var/www/trac initenv

# Configure
sudo -H htpasswd -c /var/www/trac/.htpasswd USERNAME
sudo -H trac-admin /var/www/trac/ permission add USERNAME TRAC_ADMIN 
sudo -H chown -R USERNAME:USERGROUP /var/www/trac/
sudo -H chown -R 775 /var/www/trac/
sudo -H cp tracd.service /lib/systemd/system/
sudo ln -s /lib/systemd/system/trac.service /etc/systemd/system/trac.service sudo -H a2enmod python
sudo -H cp trac.conf /etc/apache2/sites-available/
sudo -H a2ensite trac.conf
sudo service apache2 restart

# Test trac deamon
clear
echo 'Test trac deamon by this command:';
echo 'tracd --port 8000 /var/www/trac';
echo 'Test with Mini browser: apt install lynx'
